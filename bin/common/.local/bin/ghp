#!/bin/bash

set -eu -o pipefail

BASE="$(git symbolic-ref refs/remotes/origin/HEAD 2>/dev/null | sed 's@^refs/remotes/origin/@@')"
HEAD="$(git branch --show-current)"

TITLE="$(git log -1 --pretty=%s)"
BODY="$(git log -1 --pretty=%b)"

gh pr create --base="$BASE" --head="$HEAD" --title="$TITLE" --body="$BODY" --web
