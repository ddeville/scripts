#!/bin/bash

set -eu -o pipefail

if [ $# -eq 0 ] || [[ ! $1 =~ ^[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
  echo "Usage: pyswitch 1.2.3"
  exit 1
fi

version="$1"

uv python install "$version"

bin="$(uv python find "$version")"
out="$HOME/.local/bin"

ln -sf "$bin" "$out/python"
ln -sf "$bin" "$out/python3"

echo "$out/python" now points to "$version"
