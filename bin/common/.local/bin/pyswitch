#!/bin/bash

set -eu -o pipefail

if [ $# -eq 0 ] || [[ ! $1 =~ ^[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
  echo "Usage: pyswitch 1.2.3"
  exit 1
fi

version="$1"

uv python install "$version"
bin="$(uv python find "$version")"

ln -sf "$bin" "$HOME/.local/bin/python"
ln -sf "$bin" "$HOME/.local/bin/python3"
