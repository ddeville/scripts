#!/bin/bash

set -eu -o pipefail

if [ $# -ne 1 ]; then
  echo "Usage: pyswitch <python-request>"
  exit 1
fi

version="$1"
toolchain_dir="$XDG_TOOLCHAINS_HOME/python/metadata"
version_file="$toolchain_dir/version"

mkdir -p "$toolchain_dir"
uv python install "$version"
printf '%s\n' "$version" >"$version_file"
echo "$version_file now contains $version"
